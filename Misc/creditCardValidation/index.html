<script>

function validateCreditCard(card) {

            var cadena = card.toString();
			var longitud = cadena.length-1;
			var k = 1;
			var suma = 0;
			var i = 0;

			for (i=longitud; i>=0; i--) {
				if (k%2) {
					cifra = parseInt(cadena.charAt(i));
				} else {
					cifra = parseInt(cadena.charAt(i))*2;
				}

				if (cifra > 9) {
					cifra_cad = cifra.toString();
					cifra = parseInt(cifra_cad.charAt(0)) + parseInt(cifra_cad.charAt(1));
				}

				suma = suma + cifra;
				k++;
			}

			if (((suma % 10) == 0) && suma <=150) {
				return true;
			} else {
				return false;
			}

   
}


function completeWithZeros(number, length){
    
    var numTmp = number.toString();
	var numLength = numTmp.length;
	
    if (length > numLength) {
        var toComplete = length - numLength;
        var ceros = '';
        
        for(i=1; i<=toComplete ; i++) {
            ceros +='0';
        }
        
        numTmp = ceros+numTmp;
    
    }
    
    return numTmp;

}

/*
 * La idea es testear que cantidad de numeros válidos de tarjeta de crédito pueden formarse
 * si se tienen los primero 12 digitos de una tarjetas.
 * 
 * El resultado: Se pueden obtener 1000 tarjetas distintas.
 *
 * Si un hacker obtuviera los primeros 12 digitos deberia intentar máximo 1000 veces
 * antes de lograr dar con el numero correcto. 
 */

var number = '411111111111' // Le faltan los ultimos 4
var start = 0;
var end = 9999;

var x = 0;
var testNumber = 0;

var cont = 0;

for (x=start; x<=end ; x++) {

    testNumber =  number + completeWithZeros(x,4);
    
    if ( validateCreditCard(testNumber)  ) {
        cont++;
    }


}

console.log('Cantidad de tarjetas validas: ' + cont);


</script>

